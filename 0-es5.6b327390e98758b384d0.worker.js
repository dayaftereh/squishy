!function(){function e(t,n,r){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(t,n,r||t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function n(e){var t=l();return function(){var n,i=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function c(e,t,n){return(c=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,u=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){i=!0,u=s}finally{try{r||null==o.return||o.return()}finally{if(i)throw u}}return n}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="6+kN")}({"1KK4":function(e,t){var n;t.entityMap=(y(n={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",auml:"\xe4",Aring:"\xc5",aring:"\xe5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",ouml:"\xf6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3"},"auml","\xe4"),y(n,"aring","\xe5"),y(n,"aelig","\xe6"),y(n,"ccedil","\xe7"),y(n,"egrave","\xe8"),y(n,"eacute","\xe9"),y(n,"ecirc","\xea"),y(n,"euml","\xeb"),y(n,"igrave","\xec"),y(n,"iacute","\xed"),y(n,"icirc","\xee"),y(n,"iuml","\xef"),y(n,"eth","\xf0"),y(n,"ntilde","\xf1"),y(n,"ograve","\xf2"),y(n,"oacute","\xf3"),y(n,"ocirc","\xf4"),y(n,"otilde","\xf5"),y(n,"ouml","\xf6"),y(n,"oslash","\xf8"),y(n,"ugrave","\xf9"),y(n,"uacute","\xfa"),y(n,"ucirc","\xfb"),y(n,"uuml","\xfc"),y(n,"yacute","\xfd"),y(n,"thorn","\xfe"),y(n,"yuml","\xff"),y(n,"nbsp"," "),y(n,"iexcl","\xa1"),y(n,"cent","\xa2"),y(n,"pound","\xa3"),y(n,"curren","\xa4"),y(n,"yen","\xa5"),y(n,"brvbar","\xa6"),y(n,"sect","\xa7"),y(n,"uml","\xa8"),y(n,"copy","\xa9"),y(n,"ordf","\xaa"),y(n,"laquo","\xab"),y(n,"not","\xac"),y(n,"shy","\xad\xad"),y(n,"reg","\xae"),y(n,"macr","\xaf"),y(n,"deg","\xb0"),y(n,"plusmn","\xb1"),y(n,"sup2","\xb2"),y(n,"sup3","\xb3"),y(n,"acute","\xb4"),y(n,"micro","\xb5"),y(n,"para","\xb6"),y(n,"middot","\xb7"),y(n,"cedil","\xb8"),y(n,"sup1","\xb9"),y(n,"ordm","\xba"),y(n,"raquo","\xbb"),y(n,"frac14","\xbc"),y(n,"frac12","\xbd"),y(n,"frac34","\xbe"),y(n,"iquest","\xbf"),y(n,"times","\xd7"),y(n,"divide","\xf7"),y(n,"forall","\u2200"),y(n,"part","\u2202"),y(n,"exist","\u2203"),y(n,"empty","\u2205"),y(n,"nabla","\u2207"),y(n,"isin","\u2208"),y(n,"notin","\u2209"),y(n,"ni","\u220b"),y(n,"prod","\u220f"),y(n,"sum","\u2211"),y(n,"minus","\u2212"),y(n,"lowast","\u2217"),y(n,"radic","\u221a"),y(n,"prop","\u221d"),y(n,"infin","\u221e"),y(n,"ang","\u2220"),y(n,"and","\u2227"),y(n,"or","\u2228"),y(n,"cap","\u2229"),y(n,"cup","\u222a"),y(n,"int","\u222b"),y(n,"there4","\u2234"),y(n,"sim","\u223c"),y(n,"cong","\u2245"),y(n,"asymp","\u2248"),y(n,"ne","\u2260"),y(n,"equiv","\u2261"),y(n,"le","\u2264"),y(n,"ge","\u2265"),y(n,"sub","\u2282"),y(n,"sup","\u2283"),y(n,"nsub","\u2284"),y(n,"sube","\u2286"),y(n,"supe","\u2287"),y(n,"oplus","\u2295"),y(n,"otimes","\u2297"),y(n,"perp","\u22a5"),y(n,"sdot","\u22c5"),y(n,"Alpha","\u0391"),y(n,"Beta","\u0392"),y(n,"Gamma","\u0393"),y(n,"Delta","\u0394"),y(n,"Epsilon","\u0395"),y(n,"Zeta","\u0396"),y(n,"Eta","\u0397"),y(n,"Theta","\u0398"),y(n,"Iota","\u0399"),y(n,"Kappa","\u039a"),y(n,"Lambda","\u039b"),y(n,"Mu","\u039c"),y(n,"Nu","\u039d"),y(n,"Xi","\u039e"),y(n,"Omicron","\u039f"),y(n,"Pi","\u03a0"),y(n,"Rho","\u03a1"),y(n,"Sigma","\u03a3"),y(n,"Tau","\u03a4"),y(n,"Upsilon","\u03a5"),y(n,"Phi","\u03a6"),y(n,"Chi","\u03a7"),y(n,"Psi","\u03a8"),y(n,"Omega","\u03a9"),y(n,"alpha","\u03b1"),y(n,"beta","\u03b2"),y(n,"gamma","\u03b3"),y(n,"delta","\u03b4"),y(n,"epsilon","\u03b5"),y(n,"zeta","\u03b6"),y(n,"eta","\u03b7"),y(n,"theta","\u03b8"),y(n,"iota","\u03b9"),y(n,"kappa","\u03ba"),y(n,"lambda","\u03bb"),y(n,"mu","\u03bc"),y(n,"nu","\u03bd"),y(n,"xi","\u03be"),y(n,"omicron","\u03bf"),y(n,"pi","\u03c0"),y(n,"rho","\u03c1"),y(n,"sigmaf","\u03c2"),y(n,"sigma","\u03c3"),y(n,"tau","\u03c4"),y(n,"upsilon","\u03c5"),y(n,"phi","\u03c6"),y(n,"chi","\u03c7"),y(n,"psi","\u03c8"),y(n,"omega","\u03c9"),y(n,"thetasym","\u03d1"),y(n,"upsih","\u03d2"),y(n,"piv","\u03d6"),y(n,"OElig","\u0152"),y(n,"oelig","\u0153"),y(n,"Scaron","\u0160"),y(n,"scaron","\u0161"),y(n,"Yuml","\u0178"),y(n,"fnof","\u0192"),y(n,"circ","\u02c6"),y(n,"tilde","\u02dc"),y(n,"ensp","\u2002"),y(n,"emsp","\u2003"),y(n,"thinsp","\u2009"),y(n,"zwnj","\u200c"),y(n,"zwj","\u200d"),y(n,"lrm","\u200e"),y(n,"rlm","\u200f"),y(n,"ndash","\u2013"),y(n,"mdash","\u2014"),y(n,"lsquo","\u2018"),y(n,"rsquo","\u2019"),y(n,"sbquo","\u201a"),y(n,"ldquo","\u201c"),y(n,"rdquo","\u201d"),y(n,"bdquo","\u201e"),y(n,"dagger","\u2020"),y(n,"Dagger","\u2021"),y(n,"bull","\u2022"),y(n,"hellip","\u2026"),y(n,"permil","\u2030"),y(n,"prime","\u2032"),y(n,"Prime","\u2033"),y(n,"lsaquo","\u2039"),y(n,"rsaquo","\u203a"),y(n,"oline","\u203e"),y(n,"euro","\u20ac"),y(n,"trade","\u2122"),y(n,"larr","\u2190"),y(n,"uarr","\u2191"),y(n,"rarr","\u2192"),y(n,"darr","\u2193"),y(n,"harr","\u2194"),y(n,"crarr","\u21b5"),y(n,"lceil","\u2308"),y(n,"rceil","\u2309"),y(n,"lfloor","\u230a"),y(n,"rfloor","\u230b"),y(n,"loz","\u25ca"),y(n,"spades","\u2660"),y(n,"clubs","\u2663"),y(n,"hearts","\u2665"),y(n,"diams","\u2666"),n)},"6+kN":function(r,o,l){"use strict";l.r(o);var h={};l.r(h),l.d(h,"Color",(function(){return be})),l.d(h,"Matrix3",(function(){return Oe})),l.d(h,"Matrix4",(function(){return Ae})),l.d(h,"Plane",(function(){return ze})),l.d(h,"Point2",(function(){return _e})),l.d(h,"Point3",(function(){return Re})),l.d(h,"Quaternion",(function(){return Ie})),l.d(h,"Ray",(function(){return Ce})),l.d(h,"Sphere",(function(){return Pe})),l.d(h,"Transform2",(function(){return $e})),l.d(h,"Vec2",(function(){return Me})),l.d(h,"Vec3",(function(){return Te})),l.d(h,"EPSILON",(function(){return we})),l.d(h,"clamp",(function(){return xe})),l.d(h,"toDegrees",(function(){return ke})),l.d(h,"toRadians",(function(){return Ne})),l.d(h,"closeZero",(function(){return Ee})),l.d(h,"closeEquals",(function(){return Se})),l.d(h,"Random",(function(){return Ue}));var v=Symbol("Comlink.proxy"),m=Symbol("Comlink.endpoint"),g=Symbol("Comlink.releaseProxy"),b=Symbol("Comlink.thrown"),w=function(e){return"object"==typeof e&&null!==e||"function"==typeof e},x=new Map([["proxy",{canHandle:function(e){return w(e)&&e[v]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return k(e,n),[r,[r]]},deserialize:function(e){return e.start(),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,u=new Proxy(r,{get:function(r,a){if(E(i),a===g)return function(){return T(t,{type:5,path:n.map((function(e){return e.toString()}))}).then((function(){N(t),i=!0}))};if("then"===a){if(0===n.length)return{then:function(){return u}};var o=T(t,{type:0,path:n.map((function(e){return e.toString()}))}).then(_);return o.then.bind(o)}return e(t,[].concat(d(n),[a]))},set:function(e,r,u){E(i);var a=f(M(u),2),o=a[0],s=a[1];return T(t,{type:1,path:[].concat(d(n),[r]).map((function(e){return e.toString()})),value:o},s).then(_)},apply:function(r,u,a){E(i);var o=n[n.length-1];if(o===m)return T(t,{type:4}).then(_);if("bind"===o)return e(t,n.slice(0,-1));var s=f(S(a),2),c=s[0],l=s[1];return T(t,{type:2,path:n.map((function(e){return e.toString()})),argumentList:c},l).then(_)},construct:function(e,r){E(i);var u=f(S(r),2),a=u[0],o=u[1];return T(t,{type:3,path:n.map((function(e){return e.toString()})),argumentList:a},o).then(_)}});return u}(e,[],void 0)}}],["throw",{canHandle:function(e){return w(e)&&b in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;t.addEventListener("message",(function n(r){if(r&&r.data){var i,u=Object.assign({path:[]},r.data),a=u.id,o=u.type,s=u.path,l=(r.data.argumentList||[]).map(_);try{var h=s.slice(0,-1).reduce((function(e,t){return e[t]}),e),p=s.reduce((function(e,t){return e[t]}),e);switch(o){case 0:i=p;break;case 1:h[s.slice(-1)[0]]=_(r.data.value),i=!0;break;case 2:i=p.apply(h,l);break;case 3:i=function(e){return Object.assign(e,y({},v,!0))}(c(p,d(l)));break;case 4:var m=new MessageChannel,g=m.port1,w=m.port2;k(e,w),i=function(e,t){return D.set(e,t),e}(g,[g]);break;case 5:i=void 0}}catch(x){i=y({value:x},b,0)}Promise.resolve(i).catch((function(e){return y({value:e},b,0)})).then((function(e){var r=f(M(e),2),i=r[0],u=r[1];t.postMessage(Object.assign(Object.assign({},i),{id:a}),u),5===o&&(t.removeEventListener("message",n),N(t))}))}})),t.start&&t.start()}function N(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function E(e){if(e)throw new Error("Proxy has been released and is not useable")}function S(e){var t,n=e.map(M);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var D=new WeakMap;function M(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,u=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw u}}}}(x);try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],u=r[1];if(u.canHandle(e)){var a=f(u.serialize(e),2);return[{type:3,name:i,value:a[0]},a[1]]}}}catch(o){n.e(o)}finally{n.f()}return[{type:0,value:e},D.get(e)||[]]}function _(e){switch(e.type){case 3:return x.get(e.name).deserialize(e.value);case 0:return e.value}}function T(e,t,n){return new Promise((function(r){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)}))}function R(e,t,n,r){return new(n||(n=Promise))((function(i,u){function a(e){try{s(r.next(e))}catch(t){u(t)}}function o(e){try{s(r.throw(e))}catch(t){u(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}s((r=r.apply(e,t||[])).next())}))}function O(e){return"function"==typeof e}var A=!1,z={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else A&&console.log("RxJS: Back to a better error behavior. Thank you. <3");A=e},get useDeprecatedSynchronousErrorHandling(){return A}};function I(e){setTimeout((function(){throw e}),0)}var C,P={closed:!0,next:function(e){},error:function(e){if(z.useDeprecatedSynchronousErrorHandling)throw e;I(e)},complete:function(){}},$=Array.isArray||function(e){return e&&"number"==typeof e.length},U=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),F=((C=function(){function e(t){a(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return s(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n,r=this._parentOrParents,i=this._ctorUnsubscribe,u=this._unsubscribe,a=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var o=0;o<r.length;++o)r[o].remove(this);if(O(u)){i&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof U?W(h.errors):[h]}}if($(a))for(var s=-1,c=a.length;++s<c;){var l=a[s];if(null!==(n=l)&&"object"==typeof n)try{l.unsubscribe()}catch(h){t=t||[],h instanceof U?t=t.concat(W(h.errors)):t.push(h)}}if(t)throw new U(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var u=this._subscriptions;return null===u?this._subscriptions=[n]:u.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new C),C);function W(e){return e.reduce((function(e,t){return e.concat(t instanceof U?t.errors:t)}),[])}var q="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),j=function(r){t(c,r);var o=n(c);function c(e,t,n){var r;switch(a(this,c),(r=o.call(this)).syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=P;break;case 1:if(!e){r.destination=P;break}if("object"==typeof e){e instanceof c?(r.syncErrorThrowable=e.syncErrorThrowable,r.destination=e,e.add(i(r))):(r.syncErrorThrowable=!0,r.destination=new L(i(r),e));break}default:r.syncErrorThrowable=!0,r.destination=new L(i(r),e,t,n)}return r}return s(c,[{key:q,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,e(u(c.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var r=new c(e,t,n);return r.syncErrorThrowable=!1,r}}]),c}(F),L=function(e){t(u,e);var r=n(u);function u(e,t,n,o){var s,c;a(this,u),(s=r.call(this))._parentSubscriber=e;var l=i(s);return O(t)?c=t:t&&(c=t.next,n=t.error,o=t.complete,t!==P&&(O((l=Object.create(t)).unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(i(s)))),s._context=l,s._next=c,s._error=n,s._complete=o,s}return s(u,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;z.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=z.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):I(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;I(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};z.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),z.useDeprecatedSynchronousErrorHandling)throw n;I(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!z.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return z.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(I(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),u}(j),V="function"==typeof Symbol&&Symbol.observable||"@@observable";function H(e){return e}var Y,B=((Y=function(){function e(t){a(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return s(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof j)return e;if(e[q])return e[q]()}return e||t||n?new j(e,t,n):new j(P)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||z.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),z.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){z.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof j?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=X(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:V,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:(0===(r=t).length?H:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r}},{key:"toPromise",value:function(e){var t=this;return new(e=X(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new Y(e)},Y);function X(e){if(e||(e=z.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var Q,G=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),Z=function(e){t(i,e);var r=n(i);function i(e,t){var n;return a(this,i),(n=r.call(this)).subject=e,n.subscriber=t,n.closed=!1,n}return s(i,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),i}(F),J=function(e){t(i,e);var r=n(i);function i(e){var t;return a(this,i),(t=r.call(this,e)).destination=e,t}return i}(j),K=((Q=function(r){t(o,r);var i=n(o);function o(){var e;return a(this,o),(e=i.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s(o,[{key:q,value:function(){return new J(this)}},{key:"lift",value:function(e){var t=new ee(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new G;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new G;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new G;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new G;return e(u(o.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(e){if(this.closed)throw new G;return this.hasError?(e.error(this.thrownError),F.EMPTY):this.isStopped?(e.complete(),F.EMPTY):(this.observers.push(e),new Z(this,e))}},{key:"asObservable",value:function(){var e=new B;return e.source=this,e}}]),o}(B)).create=function(e,t){return new ee(e,t)},Q),ee=function(e){t(i,e);var r=n(i);function i(e,t){var n;return a(this,i),(n=r.call(this)).destination=e,n.source=t,n}return s(i,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):F.EMPTY}}]),i}(K),te="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),ne=new Uint8Array(16);function re(){if(!te)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return te(ne)}for(var ie=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ue=function(e){return"string"==typeof e&&ie.test(e)},ae=[],oe=0;oe<256;++oe)ae.push((oe+256).toString(16).substr(1));var se=function(e,t,n){var r=(e=e||{}).random||(e.rng||re)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ae[e[t+0]]+ae[e[t+1]]+ae[e[t+2]]+ae[e[t+3]]+"-"+ae[e[t+4]]+ae[e[t+5]]+"-"+ae[e[t+6]]+ae[e[t+7]]+"-"+ae[e[t+8]]+ae[e[t+9]]+"-"+ae[e[t+10]]+ae[e[t+11]]+ae[e[t+12]]+ae[e[t+13]]+ae[e[t+14]]+ae[e[t+15]]).toLowerCase();if(!ue(n))throw TypeError("Stringified UUID is invalid");return n}(r)},ce=function(){function e(){a(this,e)}return s(e,null,[{key:"uuid",value:function(){return se()}},{key:"isNullOrUndefined",value:function(e){return null==e}},{key:"isEmpty",value:function(t){return!!e.isNullOrUndefined(t)||!t||t.length<1}},{key:"forEachProperty",value:function(e,t){Object.keys(e).forEach((function(n){t(e[n],n)}))}},{key:"mapProperties",value:function(e,t){return Object.keys(e).map((function(n){return t(e[n],n)}))}},{key:"readFileAsText",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!1,i=new FileReader,n.abrupt("return",new Promise((function(n,u){i.onerror=function(e){r||u(e),r=!0};var a=function(){r||n(i.result),r=!0};i.onload=a,i.onloadend=a,i.readAsText(e,t)})));case 3:case"end":return n.stop()}}),n)})))}},{key:"readFileAsArrayBuffer",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,r=new FileReader,t.abrupt("return",new Promise((function(t,i){r.onerror=function(e){n||i(e),n=!0};var u=function(){n||t(r.result),n=!0};r.onload=u,r.onloadend=u,r.readAsArrayBuffer(e)})));case 3:case"end":return t.stop()}}),t)})))}},{key:"getNodesData",value:function(t){return e.isNullOrUndefined(t)||e.isNullOrUndefined(t.data)||e.isNullOrUndefined(t.data.nodes)?[]:e.mapProperties(t.data.nodes,(function(e){return e}))}},{key:"getSquishyNodesData",value:function(t){return e.getNodesData(t).map((function(t){if(!e.isNullOrUndefined(t)&&!e.isNullOrUndefined(t.data))return t.data})).filter((function(t){return!e.isNullOrUndefined(t)}))}},{key:"headOfSet",value:function(e){var t=Array.from(e.values());if(t)return t[0]}}]),e}(),le=function(e){return e.STARTED="started",e.INITIALIZING="initializing",e.RUNNING="running",e.COLLECTING="collecting",e.RESPONSE="response",e.DONE="done",e}({}),he=function(e){return e.FileInput="FileInput",e.FileOutput="FileOutput",e.Script="Script",e.TextInput="TextInput",e.Chart="Chart",e}({}),fe=function(e){return e.None="None",e.X="X",e.Y="Y",e.XY="XY",e}({}),de=function(){function e(t,n,r){a(this,e),this.execution=t,this.nodeData=n,this.executionData=r,this.executed=!1}return s(e,[{key:"isExecuted",value:function(){return this.executed}},{key:"getNodeData",value:function(){var e=this.squishyNodeData();if(!ce.isNullOrUndefined(e))return e}},{key:"getExecutionData",value:function(){if(!ce.isNullOrUndefined(this.executionData))return this.executionData}},{key:"squishyNodeData",value:function(){if(!ce.isNullOrUndefined(this.nodeData)&&!ce.isNullOrUndefined(this.nodeData.data))return this.nodeData.data}},{key:"id",value:function(){var e=this.squishyNodeData();if(!ce.isNullOrUndefined(e))return e.id}},{key:"execute",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isExecuteable();case 2:if(e.sent){e.next=4;break}throw new Error("unable to execute nod executor [ ".concat(this.id()," ], because node executor not executable"));case 4:return e.prev=4,e.next=7,this.internalExecute();case 7:return e.prev=7,this.executed=!0,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[4,,7,10]])})))}},{key:"isExecuteable",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDependentNodeExecutors();case 2:return e.abrupt("return",e.sent.every((function(e){return e.isExecuted()})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getInputConnections",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,e.abrupt("return",(ce.isNullOrUndefined(this.nodeData)||ce.isNullOrUndefined(this.nodeData.inputs)||ce.forEachProperty(this.nodeData.inputs,(function(e){!ce.isNullOrUndefined(e.connections)&&e.connections&&e.connections.forEach((function(e){t.add(e.output)}))})),t));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getDependentNodeExecutors",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getInputConnections();case 2:return t=e.sent,n=Array.from(t.values()),e.next=6,Promise.all(n.map((function(e){return R(r,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.execution.getExecutor(e);case 2:if(n=t.sent,!ce.isNullOrUndefined(n)){t.next=5;break}throw new Error("unable to find node executor for depnendency [ ".concat(e," ]"));case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})))})));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getExecutorId",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ce.isNullOrUndefined(this.nodeData)&&!ce.isNullOrUndefined(this.nodeData.inputs)){t.next=2;break}return t.abrupt("return");case 2:if(n=this.nodeData.inputs,!ce.isNullOrUndefined(n[e])){t.next=5;break}return t.abrupt("return");case 5:return r=n[e],t.abrupt("return",!r.connections||r.connections.length<1?void 0:r.connections[0].output);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getExecutor",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getExecutorId(e);case 2:return n=t.sent,t.next=5,this.execution.getExecutor(n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getResult",value:function(){return this.result}},{key:"hasOutput",value:function(){return!1}}]),e}(),pe=function(e){t(i,e);var r=n(i);function i(e,t,n){return a(this,i),r.call(this,e,t,n)}return s(i,[{key:"internalExecute",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getNodeData(),!ce.isNullOrUndefined(t)){e.next=3;break}throw new Error("unable to get chart data");case 3:return e.next=5,Promise.all(ce.mapProperties(t.datasets,(function(e,t){return R(u,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.dataset(t,e));case 1:case"end":return n.stop()}}),n,this)})))})));case 5:return n=e.sent.filter((function(e){return!ce.isNullOrUndefined(e)})),e.next=8,this.options(t);case 8:r=e.sent,i={id:this.id(),data:{datasets:n},options:r},this.result=i;case 11:case"end":return e.stop()}}),e,this)})))}},{key:"dataset",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getExecutor(e);case 2:if(r=n.sent,!ce.isNullOrUndefined(r)){n.next=5;break}return n.abrupt("return");case 5:if(r.isExecuted()){n.next=7;break}throw new Error("node executor [ ".concat(r.id()," ] for dataset [ ").concat(e,", ").concat(t.name," ] is not yet executed"));case 7:return i=r.getResult(),n.abrupt("return",this.createDataset(i,t));case 9:case"end":return n.stop()}}),n,this)})))}},{key:"createDataset",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{data:e,fill:t.fill,label:t.name,showLine:t.lines,borderColor:t.color,pointBackgroundColor:t.color});case 1:case"end":return n.stop()}}),n)})))}},{key:"options",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.zoomPanPlugin(e);case 2:return n=t.sent,r=e.animation?750:0,t.abrupt("return",{animation:{duration:r},hover:{animationDuration:r},responsiveAnimationDuration:r,plugins:{zoom:n}});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"zoomPanPlugin",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.pan!==fe.None,r=e.zoom!==fe.None,i={pan:{enabled:n},zoom:{enabled:r}},t.abrupt("return",(n&&(i.pan.mode=(""+e.pan).toLowerCase()),r&&(i.zoom.mode=(""+e.zoom).toLowerCase()),i));case 3:case"end":return t.stop()}}),t)})))}},{key:"hasOutput",value:function(){return!0}}]),i}(de),ve=function(e){return e.Binary="binary",e.Text="text",e}({}),ye=function(e){return e.ASCII="ascii",e.ISO_8859_1="ISO-8859-1",e.ISO_8859_15="ISO-8859-15",e.UTF_8="UTF-8",e.UTF_16="UTF-16",e}({}),me=function(e){t(i,e);var r=n(i);function i(e,t,n){return a(this,i),r.call(this,e,t,n)}return s(i,[{key:"internalExecute",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.result=void 0,!ce.isNullOrUndefined(this.fileInputExecutionData)&&this.fileInputExecutionData){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all(this.fileInputExecutionData.map((function(e){return R(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.read(e);case 2:return n=t.sent,t.abrupt("return",this.extendedOutput?{file:e,data:n}:n);case 4:case"end":return t.stop()}}),t,this)})))})));case 4:t=e.sent,!ce.isNullOrUndefined(t)&&t&&(this.result=t,t.length<2&&(this.result=t[0]));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"read",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.getNodeData().mode!==ve.Text){t.next=6;break}return t.next=3,ce.readFileAsText(e,this.endocing);case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,ce.readFileAsArrayBuffer(e);case 8:t.t0=t.sent;case 9:return t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"fileInputExecutionData",get:function(){return this.executionData}},{key:"endocing",get:function(){return this.getNodeData().encoding?this.getNodeData().encoding:ye.UTF_8}},{key:"extendedOutput",get:function(){return!!this.getNodeData().extendedOutput&&this.getNodeData().extendedOutput}}]),i}(de),ge=function(e){t(i,e);var r=n(i);function i(e,t,n){return a(this,i),r.call(this,e,t,n)}return s(i,[{key:"internalExecute",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDependentNodeExecutors();case 2:if((t=e.sent)&&!(t.length<1)){e.next=5;break}throw new Error("unable to execute file output executor [ ".concat(this.id()," ], because no dependent node executor found"));case 5:if((n=t[0]).isExecuted()){e.next=8;break}throw new Error("dependet node executor [ ".concat(n.id()," ] for node [ ").concat(this.id()," ] are not executed"));case 8:r=n.getResult(),i=new Blob([r],{type:this.getNodeData().contentType,endings:this.getNodeData().endings}),u=URL.createObjectURL(i),this.result=u;case 10:case"end":return e.stop()}}),e,this)})))}},{key:"hasOutput",value:function(){return!0}}]),i}(de),be=function(){function e(t,n,r,i){a(this,e),this.r=t,this.g=n,this.b=r,this.a=i}return s(e,[{key:"toHex",value:function(){var e=function(e){for(var t=Math.round(255*e).toString(16);t.length<2;)t="0"+t;return t},t=e(this.r),n=e(this.g),r=e(this.b);return this.isAlpha()?"#".concat(t).concat(n).concat(r).concat(e(this.a)):"#".concat(t).concat(n).concat(r)}},{key:"toString",value:function(){var e=Math.round(255*this.r),t=Math.round(255*this.g),n=Math.round(255*this.b);return this.isAlpha()?"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.a,")"):"rgb(".concat(e,", ").concat(t,", ").concat(n,")")}},{key:"isAlpha",value:function(){return null!=this.a}}],[{key:"fromHSL",value:function(t,n,r){var i=new e(0,0,0,void 0);if(0==n)i.r=i.g=i.b=r;else{var u=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},a=r<.5?r*(1+n):r+n-r*n,o=2*r-a;i.r=u(o,a,t+1/3),i.g=u(o,a,t),i.b=u(o,a,t-1/3)}return i}},{key:"random",value:function(){var t=Math.random();return e.fromHSL(t,1,.5)}}]),e}(),we=1e-10;function xe(e,t,n){return Math.min(n,Math.max(e,t))}function ke(e){return 180*e/Math.PI}function Ne(e){return e*Math.PI/180}function Ee(e){return Se(0,e)}function Se(e,t){return Math.abs(e-t)<we}var De,Me=function(){function e(t,n){a(this,e),this.x=t,this.y=n}return s(e,[{key:"dot",value:function(e,t){return this.x*e+this.y*t}},{key:"dotWith",value:function(e){return this.dot(e.x,e.y)}},{key:"cross",value:function(e,t){return this.x*t-this.y*e}},{key:"crossWith",value:function(e){return this.cross(e.x,e.y)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){var e=this.lengthSquared();return Math.sqrt(e)}},{key:"normalize",value:function(){var t=this.length();return Ee(t)?new e(0,0):new e(this.x/t,this.y/t)}},{key:"angle",value:function(e,t){var n=this.dot(e,t),r=this.length(),i=Math.sqrt(e*e+t*t);return Math.acos(n/(r*i))}},{key:"angleWith",value:function(e){return this.angle(e.x,e.y)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t)}},{key:"add",value:function(t,n){return new e(this.x+t,this.y+n)}},{key:"addWith",value:function(e){return this.add(e.x,e.y)}},{key:"multiply",value:function(t,n){return new e(this.x*t,this.y*n)}},{key:"multiplyWith",value:function(e){return this.multiply(e.x,e.y)}},{key:"divide",value:function(t,n){return new e(this.x/t,this.y/n)}},{key:"divideWith",value:function(e){return this.divide(e.x,e.y)}},{key:"subtract",value:function(t,n){return new e(this.x-t,this.y-n)}},{key:"subtractWith",value:function(e){return this.subtract(e.x,e.y)}},{key:"inverse",value:function(){return new e(-1*this.x,-1*this.y)}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"perpendicularCW",value:function(){return new e(this.y,-this.x)}},{key:"perpendicularCCW",value:function(){return new e(-this.y,this.x)}},{key:"applyMatrix3",value:function(e){return e.applyVec2(this)}},{key:"rotateAround",value:function(t,n,r){var i=Math.cos(r),u=Math.sin(r),a=this.x-t,o=this.y-n;return new e(a*i-o*u+t,a*u+o*i+n)}},{key:"rotateAroundWith",value:function(e,t){return this.rotateAround(e.x,e.y,t)}}],[{key:"random",value:function(){return new e(Math.random(),Math.random())}},{key:"xAxis",value:function(){return new e(1,0)}},{key:"yAxis",value:function(){return new e(0,1)}}]),e}(),_e=function(){function e(t,n){a(this,e),this.x=t,this.y=n}return s(e,[{key:"translate",value:function(t,n){return new e(this.x+t,this.y+n)}},{key:"translateWith",value:function(e){return this.translate(e.x,e.y)}},{key:"translateDirection",value:function(e,t){var n=e.scale(t);return this.translateWith(n)}},{key:"distanceSquared",value:function(e,t){var n=this.x-e,r=this.y-t;return n*n+r*r}},{key:"distanceSquaredTo",value:function(e){return this.distanceSquared(e.x,e.y)}},{key:"distance",value:function(e,t){var n=this.distanceSquared(e,t);return Math.sqrt(n)}},{key:"distanceTo",value:function(e){return this.distance(e.x,e.y)}},{key:"subtract",value:function(e,t){return new Me(this.x-e,this.y-t)}},{key:"subtractWith",value:function(e){return this.subtract(e.x,e.y)}},{key:"center",value:function(t,n){return new e((this.x+t)/2,(this.y+n)/2)}},{key:"centerWith",value:function(e){return this.center(e.x,e.y)}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"applyMatrix3",value:function(e){return e.applyPoint2(this)}}]),e}(),Te=function(){function e(t,n,r){a(this,e),this.x=t,this.y=n,this.z=r}return s(e,[{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){var e=this.lengthSquared();return Math.sqrt(e)}},{key:"dot",value:function(e,t,n){return this.x*e+this.y*t+this.z*n}},{key:"dotWith",value:function(e){return this.dot(e.x,e.y,e.z)}},{key:"normalize",value:function(){var t=this.length();return Ee(t)?new e(0,0,0):new e(this.x/t,this.y/t,this.z/t)}},{key:"cross",value:function(t,n,r){return new e(this.y*r-this.z*n,t*this.z-r*this.x,this.x*n-this.y*t)}},{key:"crossWith",value:function(e){return this.cross(e.x,e.y,e.z)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t,this.z*t)}},{key:"add",value:function(t,n,r){return new e(this.x+t,this.y+n,this.z+r)}},{key:"addWith",value:function(e){return this.add(e.x,e.y,e.z)}},{key:"multiply",value:function(t,n,r){return new e(this.x*t,this.y*n,this.z*r)}},{key:"multiplyWith",value:function(e){return this.multiply(e.x,e.y,e.z)}},{key:"divide",value:function(t,n,r){return new e(this.x/t,this.y/n,this.z/r)}},{key:"divideWith",value:function(e){return this.divide(e.x,e.y,e.z)}},{key:"subtract",value:function(t,n,r){return new e(this.x-t,this.y-n,this.z-r)}},{key:"subtractWith",value:function(e){return this.subtract(e.x,e.y,e.z)}},{key:"inverse",value:function(){return new e(-1*this.x,-1*this.y,-1*this.z)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"applyMatrix3",value:function(e){return e.applyVec3(this)}},{key:"applyMatrix4",value:function(e){return e.applyVec3(this)}},{key:"applyQuaternion",value:function(e){return e.applyVec3(this)}},{key:"distanceSquared",value:function(e,t,n){var r=this.x-e,i=this.y-t,u=this.z-n;return r*r+i*i+u*u}},{key:"distanceSquaredTo",value:function(e){return this.distanceSquared(e.x,e.y,e.z)}},{key:"distance",value:function(e,t,n){var r=this.distanceSquared(e,t,n);return Math.sqrt(r)}},{key:"distanceTo",value:function(e){return this.distance(e.x,e.y,e.z)}}],[{key:"random",value:function(){return new e(Math.random(),Math.random(),Math.random())}},{key:"xAxis",value:function(){return new e(1,0,0)}},{key:"yAxis",value:function(){return new e(0,1,0)}},{key:"zAxis",value:function(){return new e(0,0,1)}}]),e}(),Re=function(){function e(t,n,r){a(this,e),this.x=t,this.y=n,this.z=r}return s(e,[{key:"translate",value:function(t,n,r){return new e(this.x+t,this.y+n,this.z+r)}},{key:"translateWith",value:function(e){return this.translate(e.x,e.y,e.z)}},{key:"translateDirection",value:function(e,t){var n=e.scale(t);return this.translateWith(n)}},{key:"distanceSquared",value:function(e,t,n){var r=this.x-e,i=this.y-t,u=this.z-n;return r*r+i*i+u*u}},{key:"distanceSquaredTo",value:function(e){return this.distanceSquared(e.x,e.y,e.z)}},{key:"distance",value:function(e,t,n){var r=this.distanceSquared(e,t,n);return Math.sqrt(r)}},{key:"distanceTo",value:function(e){return this.distance(e.x,e.y,e.z)}},{key:"subtract",value:function(e,t,n){return new Te(this.x-e,this.y-t,this.z-n)}},{key:"subtractWith",value:function(e){return this.subtract(e.x,e.y,e.z)}},{key:"center",value:function(t,n,r){return new e((this.x+t)/2,(this.y+n)/2,(this.z+r)/2)}},{key:"centerWith",value:function(e){return this.center(e.x,e.y,e.z)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"applyMatrix3",value:function(e){return e.applyPoint3(this)}},{key:"applyMatrix4",value:function(e){return e.applyPoint3(this)}},{key:"applyQuaternion",value:function(e){return e.applyPoint3(this)}}]),e}(),Oe=function(){function e(t,n,r,i,u,o,s,c,l){a(this,e),this.elements=[t,i,s,n,u,c,r,o,l]}return s(e,[{key:"clone",value:function(){var t=this.elements;return new e(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])}},{key:"multiplyWith",value:function(t){return e.multiplyMatrices(this,t)}},{key:"premultiplyWith",value:function(t){return e.multiplyMatrices(t,this)}},{key:"multiplyScalar",value:function(e){var t=this.clone(),n=t.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,t}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],u=e[4],a=e[5],o=e[6],s=e[7],c=e[8];return t*u*c-t*a*s-n*i*c+n*a*o+r*i*s-r*u*o}},{key:"inverse",value:function(){var t=e.zero(),n=t.elements,r=this.elements,i=n[0],u=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],h=n[7],f=n[8],d=f*s-c*h,p=c*l-f*o,v=h*o-s*l,y=i*d+u*p+a*v;if(Ee(y))return e.zero();var m=1/y;return r[0]=d*m,r[1]=(a*h-f*u)*m,r[2]=(c*u-a*s)*m,r[3]=p*m,r[4]=(f*i-a*l)*m,r[5]=(a*o-c*i)*m,r[6]=v*m,r[7]=(u*l-h*i)*m,r[8]=(s*i-u*o)*m,t}},{key:"transpose",value:function(){var e,t=this.clone(),n=t.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,t}},{key:"normalMatrix",value:function(){return this.inverse().transpose()}},{key:"scale",value:function(e,t){var n=this.clone(),r=n.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,n}},{key:"rotate",value:function(e){var t=this.clone(),n=t.elements,r=Math.cos(e),i=Math.sin(e),u=n[0],a=n[3],o=n[6],s=n[1],c=n[4],l=n[7];return n[0]=r*u+i*s,n[3]=r*a+i*c,n[6]=r*o+i*l,n[1]=-i*u+r*s,n[4]=-i*a+r*c,n[7]=-i*o+r*l,t}},{key:"translate",value:function(e,t){var n=this.clone(),r=n.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],n}},{key:"applyVec2",value:function(e){var t=e.x,n=e.y,r=this.elements;return new Me(r[0]*t+r[3]*n+r[6],r[1]*t+r[4]*n+r[7])}},{key:"applyPoint2",value:function(e){var t=new Me(e.x,e.y),n=this.applyVec2(t);return new _e(n.x,n.y)}},{key:"applyVec3",value:function(e){var t=e.x,n=e.y,r=e.z,i=this.elements;return new Te(i[0]*t+i[3]*n+i[6]*r,i[1]*t+i[4]*n+i[7]*r,i[2]*t+i[5]*n+i[8]*r)}},{key:"applyPoint3",value:function(e){var t=new Te(e.x,e.y,e.z),n=this.applyVec3(t);return new Re(n.x,n.y,n.z)}},{key:"at",value:function(e){return this.elements[e]}}],[{key:"zero",value:function(){return new e(0,0,0,0,0,0,0,0,0)}},{key:"identity",value:function(){return new e(1,0,0,0,1,0,0,0,1)}},{key:"multiplyMatrices",value:function(t,n){var r=t.elements,i=n.elements,u=e.zero(),a=u.elements,o=r[0],s=r[3],c=r[6],l=r[1],h=r[4],f=r[7],d=r[2],p=r[5],v=r[8],y=i[0],m=i[3],g=i[6],b=i[1],w=i[4],x=i[7],k=i[2],N=i[5],E=i[8];return a[0]=o*y+s*b+c*k,a[3]=o*m+s*w+c*N,a[6]=o*g+s*x+c*E,a[1]=l*y+h*b+f*k,a[4]=l*m+h*w+f*N,a[7]=l*g+h*x+f*E,a[2]=d*y+p*b+v*k,a[5]=d*m+p*w+v*N,a[8]=d*g+p*x+v*E,u}},{key:"transform",value:function(t,n,r,i,u,a,o){var s=Math.cos(u),c=Math.sin(u);return new e(r*s,r*c,-r*(s*a+c*o)+a+t,-i*c,i*s,-i*(-c*a+s*o)+o+n,0,0,1)}}]),e}(),Ae=function(){function e(t,n,r,i,u,o,s,c,l,h,f,d,p,v,y,m){a(this,e),this.elements=[t,u,l,p,n,o,h,v,r,s,f,y,i,c,d,m]}return s(e,[{key:"clone",value:function(){var t=this.elements;return new e(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])}},{key:"multiply",value:function(t){return e.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return e.multiplyMatrices(t,this)}},{key:"multiplyScalar",value:function(e){var t=this.clone(),n=t.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,t}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],u=e[1],a=e[5],o=e[9],s=e[13],c=e[2],l=e[6],h=e[10],f=e[14];return e[3]*(+i*o*l-r*s*l-i*a*h+n*s*h+r*a*f-n*o*f)+e[7]*(+t*o*f-t*s*h+i*u*h-r*u*f+r*s*c-i*o*c)+e[11]*(+t*s*l-t*a*f-i*u*l+n*u*f+i*a*c-n*s*c)+e[15]*(-r*a*c-t*o*l+t*a*h+r*u*l-n*u*h+n*o*c)}},{key:"transpose",value:function(){var e,t=this.clone(),n=t.elements;return e=n[1],n[1]=n[4],n[4]=e,e=n[2],n[2]=n[8],n[8]=e,e=n[6],n[6]=n[9],n[9]=e,e=n[3],n[3]=n[12],n[12]=e,e=n[7],n[7]=n[13],n[13]=e,e=n[11],n[11]=n[14],n[14]=e,t}},{key:"inverse",value:function(){var t=this.elements,n=e.zero(),r=n.elements,i=r[0],u=r[1],a=r[2],o=r[3],s=r[4],c=r[5],l=r[6],h=r[7],f=r[8],d=r[9],p=r[10],v=r[11],y=r[12],m=r[13],g=r[14],b=r[15],w=d*g*h-m*p*h+m*l*v-c*g*v-d*l*b+c*p*b,x=y*p*h-f*g*h-y*l*v+s*g*v+f*l*b-s*p*b,k=f*m*h-y*d*h+y*c*v-s*m*v-f*c*b+s*d*b,N=y*d*l-f*m*l-y*c*p+s*m*p+f*c*g-s*d*g,E=i*w+u*x+a*k+o*N;if(Ee(E))return n;var S=1/E;return t[0]=w*S,t[1]=(m*p*o-d*g*o-m*a*v+u*g*v+d*a*b-u*p*b)*S,t[2]=(c*g*o-m*l*o+m*a*h-u*g*h-c*a*b+u*l*b)*S,t[3]=(d*l*o-c*p*o-d*a*h+u*p*h+c*a*v-u*l*v)*S,t[4]=x*S,t[5]=(f*g*o-y*p*o+y*a*v-i*g*v-f*a*b+i*p*b)*S,t[6]=(y*l*o-s*g*o-y*a*h+i*g*h+s*a*b-i*l*b)*S,t[7]=(s*p*o-f*l*o+f*a*h-i*p*h-s*a*v+i*l*v)*S,t[8]=k*S,t[9]=(y*d*o-f*m*o-y*u*v+i*m*v+f*u*b-i*d*b)*S,t[10]=(s*m*o-y*c*o+y*u*h-i*m*h-s*u*b+i*c*b)*S,t[11]=(f*c*o-s*d*o-f*u*h+i*d*h+s*u*v-i*c*v)*S,t[12]=N*S,t[13]=(f*m*a-y*d*a+y*u*p-i*m*p-f*u*g+i*d*g)*S,t[14]=(y*c*a-s*m*a-y*u*l+i*m*l+s*u*g-i*c*g)*S,t[15]=(s*d*a-f*c*a+f*u*l-i*d*l-s*u*p+i*c*p)*S,n}},{key:"multiplyScale",value:function(e,t,n){var r=this.clone(),i=r.elements;return i[0]*=e,i[4]*=t,i[8]*=n,i[1]*=e,i[5]*=t,i[9]*=n,i[2]*=e,i[6]*=t,i[10]*=n,i[3]*=e,i[7]*=t,i[11]*=n,r}},{key:"multiplyScaleWith",value:function(e){return this.multiplyScale(e.x,e.y,e.z)}},{key:"applyVec3",value:function(e){return new Te(e.x,e.y,e.z)}},{key:"applyPoint3",value:function(e){var t=new Te(e.x,e.y,e.z),n=this.applyVec3(t);return new Re(n.x,n.y,n.z)}},{key:"at",value:function(e){return this.elements[e]}},{key:"maxScaleOnAxis",value:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}}],[{key:"identity",value:function(){return new e(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}},{key:"zero",value:function(){return new e(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},{key:"rotationFromEuler",value:function(t,n,r){var i=e.zero(),u=i.elements,a=Math.cos(t),o=Math.sin(t),s=Math.cos(n),c=Math.sin(n),l=Math.cos(r),h=Math.sin(r),f=a*l,d=a*h,p=o*l,v=o*h;return u[0]=s*l,u[4]=-s*h,u[8]=c,u[1]=d+p*c,u[5]=f-v*c,u[9]=-o*s,u[2]=v-f*c,u[6]=p+d*c,u[10]=a*s,u[3]=0,u[7]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,i}},{key:"lookAt",value:function(t,n,r){var i=e.identity(),u=i.elements,a=t.subtractWith(n);Ee(a.lengthSquared())&&(a.z=1),a=a.normalize();var o=r.crossWith(a);if(Ee(o.lengthSquared())){var s=1e-4;Se(Math.abs(r.z),1)?a.x+=s:a.z+=s,a=a.normalize(),o=r.crossWith(a)}o=o.normalize();var c=a.crossWith(o);return u[0]=o.x,u[4]=c.x,u[8]=a.x,u[1]=o.y,u[5]=c.y,u[9]=a.y,u[2]=o.z,u[6]=c.z,u[10]=a.z,i}},{key:"multiplyMatrices",value:function(t,n){var r=e.zero(),i=t.elements,u=n.elements,a=r.elements,o=i[0],s=i[4],c=i[8],l=i[12],h=i[1],f=i[5],d=i[9],p=i[13],v=i[2],y=i[6],m=i[10],g=i[14],b=i[3],w=i[7],x=i[11],k=i[15],N=u[0],E=u[4],S=u[8],D=u[12],M=u[1],_=u[5],T=u[9],R=u[13],O=u[2],A=u[6],z=u[10],I=u[14],C=u[3],P=u[7],$=u[11],U=u[15];return a[0]=o*N+s*M+c*O+l*C,a[4]=o*E+s*_+c*A+l*P,a[8]=o*S+s*T+c*z+l*$,a[12]=o*D+s*R+c*I+l*U,a[1]=h*N+f*M+d*O+p*C,a[5]=h*E+f*_+d*A+p*P,a[9]=h*S+f*T+d*z+p*$,a[13]=h*D+f*R+d*I+p*U,a[2]=v*N+y*M+m*O+g*C,a[6]=v*E+y*_+m*A+g*P,a[10]=v*S+y*T+m*z+g*$,a[14]=v*D+y*R+m*I+g*U,a[3]=b*N+w*M+x*O+k*C,a[7]=b*E+w*_+x*A+k*P,a[11]=b*S+w*T+x*z+k*$,a[15]=b*D+w*R+x*I+k*U,r}},{key:"translation",value:function(t,n,r){return new e(1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1)}},{key:"rotationX",value:function(t){var n=Math.cos(t),r=Math.sin(t);return new e(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1)}},{key:"rotationY",value:function(t){var n=Math.cos(t),r=Math.sin(t);return new e(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1)}},{key:"rotationZ",value:function(t){var n=Math.cos(t),r=Math.sin(t);return new e(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1)}},{key:"rotationAxis",value:function(t,n,r,i){var u=Math.cos(i),a=Math.sin(i),o=1-u,s=o*t,c=o*n;return new e(s*t+u,s*n-a*r,s*r+a*n,0,s*n+a*r,c*n+u,c*r-a*t,0,s*r-a*n,c*r+a*t,o*r*r+u,0,0,0,0,1)}},{key:"rotationAxisWith",value:function(t,n){return e.rotationAxis(t.x,t.y,t.z,n)}},{key:"scale",value:function(t,n,r){return new e(t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1)}},{key:"scaleWith",value:function(t){return e.scale(t.x,t.y,t.z)}},{key:"shear",value:function(t,n,r){return new e(1,n,r,0,t,1,r,0,t,n,1,0,0,0,0,1)}},{key:"shearWith",value:function(t){return e.shear(t.x,t.y,t.z)}},{key:"perspective",value:function(t,n,r,i,u,a){var o=e.zero(),s=o.elements,c=2*u/(r-i),l=(n+t)/(n-t),h=(r+i)/(r-i),f=-(a+u)/(a-u);return s[0]=2*u/(n-t),s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=c,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=f,s[14]=0,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,o}},{key:"orthographic",value:function(t,n,r,i,u,a){var o=e.zero(),s=o.elements,c=1/(n-t),l=1/(r-i),h=1/(a-u),f=(n+t)*c,d=(r+i)*l,p=(a+u)*h;return s[0]=2*c,s[4]=0,s[8]=0,s[12]=-f,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,o}},{key:"compose",value:function(t,n,r){var i=e.zero(),u=i.elements,a=n.x,o=n.y,s=n.z,c=n.w,l=a+a,h=o+o,f=s+s,d=a*l,p=a*h,v=a*f,y=o*h,m=o*f,g=s*f,b=c*l,w=c*h,x=c*f,k=r.x,N=r.y,E=r.z;return u[0]=(1-(y+g))*k,u[1]=(p+x)*k,u[2]=(v-w)*k,u[3]=0,u[4]=(p-x)*N,u[5]=(1-(d+g))*N,u[6]=(m+b)*N,u[7]=0,u[8]=(v+w)*E,u[9]=(m-b)*E,u[10]=(1-(d+y))*E,u[11]=0,u[12]=t.x,u[13]=t.y,u[14]=t.z,u[15]=1,i}},{key:"rotationFromQuaternion",value:function(t){var n=new Te(1,1,1),r=new Te(0,0,0);return e.compose(r,t,n)}}]),e}(),ze=function(){function e(t,n){a(this,e),this.normal=t.normalize(),this.constant=n}return s(e,[{key:"clone",value:function(){return new e(this.normal.clone(),this.constant)}},{key:"negate",value:function(){return new e(this.normal.inverse(),-1*this.constant)}},{key:"distanceToPoint",value:function(e){return this.normal.dotWith(e)+this.constant}},{key:"projectPoint",value:function(e){var t=this.distanceToPoint(e);return this.normal.scale(-t).addWith(e)}},{key:"translate",value:function(t){return new e(this.normal.clone(),this.constant-t.dotWith(this.normal))}},{key:"coplanarPoint",value:function(){return this.normal.scale(-this.constant)}},{key:"normalAt",value:function(e){return this.normal.clone()}}]),e}(),Ie=function(){function e(t,n,r,i){a(this,e),this.x=t,this.y=n,this.z=r,this.w=i}return s(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(xe(-1,this.dot(e),1)))}},{key:"inverse",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){var e=this.clone();return e.x*=-1,e.y*=-1,e.z*=-1,e}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){var e=this.lengthSquared();return Math.sqrt(e)}},{key:"normalize",value:function(){var t=this.clone(),n=this.length();return Ee(n)?e.identity():(t.x=t.x/n,t.y=t.y/n,t.z=t.z/n,t.w=t.w/n,t)}},{key:"multiply",value:function(t){return e.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return e.multiplyQuaternions(t,this)}},{key:"slerp",value:function(e,t){t=xe(0,t,1);var n=this.clone();if(Ee(t))return n;if(Se(1,t))return e.clone();var r=n.x,i=this.y,u=this.z,a=this.w,o=a*e.w+r*e.x+i*e.y+u*e.z;if(o<0?(n.w=-e.w,n.x=-e.x,n.y=-e.y,n.z=-e.z,o=-o):(n.w=e.w,n.x=e.x,n.y=e.y,n.z=e.z),o>=1)return n.w=a,n.x=r,n.y=i,n.z=u,n;var s=1-o*o;if(s<=we){var c=1-t;return n.w=c*a+t*n.w,n.x=c*r+t*n.x,n.y=c*i+t*n.y,n.z=c*u+t*n.z,n}var l=Math.sqrt(s),h=Math.atan2(l,o),f=Math.sin((1-t)*h)/l,d=Math.sin(t*h)/l;return n.w=a*f+n.w*d,n.x=r*f+n.x*d,n.y=i*f+n.y*d,n.z=u*f+n.z*d,n}},{key:"applyVec3",value:function(e){var t=e.x,n=e.y,r=e.z,i=this.x,u=this.y,a=this.z,o=this.w,s=o*t+u*r-a*n,c=o*n+a*t-i*r,l=o*r+i*n-u*t,h=-i*t-u*n-a*r;return new Te(s*o+h*-i+c*-a-l*-u,c*o+h*-u+l*-i-s*-a,l*o+h*-a+s*-u-c*-i)}},{key:"applyPoint3",value:function(e){var t=new Te(e.x,e.y,e.z),n=this.applyVec3(t);return new Re(n.x,n.y,n.z)}}],[{key:"zero",value:function(){return new e(0,0,0,1)}},{key:"fromEuler",value:function(t,n,r){var i=e.zero(),u=Math.cos(t/2),a=Math.cos(n/2),o=Math.cos(r/2),s=Math.sin(t/2),c=Math.sin(n/2),l=Math.sin(r/2);return i.x=s*a*o+u*c*l,i.y=u*c*o-s*a*l,i.z=u*a*l+s*c*o,i.w=u*a*o-s*c*l,i}},{key:"fromEulerWith",value:function(t){return e.fromEuler(t.x,t.y,t.z)}},{key:"fromAxisAngle",value:function(t,n,r,i){var u=e.zero(),a=i/2,o=Math.sin(a);return u.x=t*o,u.y=n*o,u.z=r*o,u.w=Math.cos(a),u}},{key:"fromAxisAngleWith",value:function(t,n){return e.fromAxisAngle(t.x,t.y,t.z,n)}},{key:"fromMatrix",value:function(t,n,r,i,u,a,o,s,c){var l=e.zero(),h=t+u+c;if(h>0){var f=.5/Math.sqrt(h+1);l.w=.25/f,l.x=(s-a)*f,l.y=(r-o)*f,l.z=(i-n)*f}else if(t>u&&t>c){var d=2*Math.sqrt(1+t-u-c);l.w=(s-a)/d,l.x=.25*d,l.y=(n+i)/d,l.z=(r+o)/d}else if(u>c){var p=2*Math.sqrt(1+u-t-c);l.w=(r-o)/p,l.x=(n+i)/p,l.y=.25*p,l.z=(a+s)/p}else{var v=2*Math.sqrt(1+c-t-u);l.w=(i-n)/v,l.x=(r+o)/v,l.y=(a+s)/v,l.z=.25*v}return l}},{key:"fromMatrix3",value:function(t){return e.fromMatrix(t.at(0),t.at(4),t.at(8),t.at(1),t.at(5),t.at(9),t.at(2),t.at(6),t.at(9))}},{key:"fromMatrix4",value:function(t){return e.fromMatrix(t.at(0),t.at(4),t.at(8),t.at(1),t.at(5),t.at(9),t.at(2),t.at(6),t.at(9))}},{key:"fromUnitVectors",value:function(t,n){var r=we,i=e.zero(),u=t.dotWith(n);return u<r?(u=0,Math.abs(t.x)>Math.abs(t.z)?(i.x=-t.y,i.y=t.x,i.z=0,i.w=u):(i.x=0,i.y=-t.z,i.z=t.y,i.w=u)):(i.x=t.y*n.z-t.z*n.y,i.y=t.z*n.x-t.x*n.z,i.z=t.x*n.y-t.y*n.x,i.w=u),i.normalize()}},{key:"identity",value:function(){return new e(0,0,0,1)}},{key:"multiplyQuaternions",value:function(t,n){var r=t.x,i=t.y,u=t.z,a=t.w,o=n.x,s=n.y,c=n.z,l=n.w,h=e.zero();return h.x=r*l+a*o+i*c-u*s,h.y=i*l+a*s+u*o-r*c,h.z=u*l+a*c+r*s-i*o,h.w=a*l-r*o-i*s-u*c,h}}]),e}(),Ce=function(){function e(t,n){a(this,e),this.origin=t,this.direction=n.normalize()}return s(e,[{key:"clone",value:function(){return new e(this.origin.clone(),this.direction.clone())}},{key:"at",value:function(e){var t=this.direction.normalize().scale(e);return this.origin.addWith(t)}},{key:"lookAt",value:function(t){var n=this.origin.clone();return new e(n,t.subtractWith(n))}},{key:"recast",value:function(t){return new e(this.at(t),this.direction.clone())}},{key:"closestPointToPoint",value:function(e){var t=e.subtractWith(this.origin).dotWith(this.direction);return t<0?this.origin.clone():this.at(t)}},{key:"distanceSquaredToPoint",value:function(e){return this.closestPointToPoint(e).distanceSquaredTo(e)}},{key:"applyMatrix4",value:function(t){return new e(this.origin.applyMatrix4(t),this.direction.applyMatrix4(t))}},{key:"applyQuaternion",value:function(t){return new e(this.origin.applyQuaternion(t),this.direction.applyQuaternion(t))}},{key:"distanceToPlane",value:function(e){var t=e.normal.dotWith(this.direction);if(Ee(t))return Ee(e.distanceToPoint(this.origin))?0:void 0;var n=-(this.origin.dotWith(e.normal)+e.constant)/t;return n<0?void 0:n}},{key:"intersectPlane",value:function(e){var t=this.distanceToPlane(e);if(void 0!==t)return this.at(t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return!!Ee(t)||e.normal.dotWith(this.direction)*t<0}},{key:"intersectSphere",value:function(e){var t=e.center.subtractWith(this.origin),n=t.dotWith(this.direction),r=t.dotWith(t)-n*n,i=e.radius*e.radius;if(!(r>i)){var u=Math.sqrt(i-r),a=n-u,o=n+u;return a<0&&o<0?void 0:this.at(a<0?o:a)}}},{key:"intersectsSphere",value:function(e){var t=e.center.subtractWith(this.origin),n=t.dotWith(this.direction),r=n*n-t.dotWith(t)+e.radius*e.radius;return r>0||Ee(r)}}]),e}(),Pe=function(){function e(t,n){a(this,e),this.center=t,this.radius=n}return s(e,[{key:"containsPoint",value:function(e){return e.distanceSquaredTo(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"translate",value:function(t){return new e(this.center.addWith(t),this.radius)}},{key:"applyMatrix4",value:function(t){return new e(this.center.applyMatrix4(t),this.radius*t.maxScaleOnAxis())}},{key:"normalAt",value:function(e){return e.subtractWith(this.center).normalize()}}]),e}(),$e=function(){function e(t,n,r,i,u,o){a(this,e),this.a=t,this.b=n,this.c=r,this.d=i,this.e=u,this.f=o}return s(e,[{key:"scale",value:function(e,t){var n=this.clone();return Ee(n.a)?n.a=e:n.a*=e,n.b*=e,n.c*=t,Ee(n.d)?n.d=t:n.d*=t,n}},{key:"scaleWith",value:function(e){return this.scale(e.x,e.y)}},{key:"det",value:function(){return this.a*this.d-this.b*this.c}},{key:"inverse",value:function(){var t=this.det();return Ee(t)?e.identity():new e(this.d/t,-this.b/t,-this.c/t,this.a/t,(this.c*this.f-this.d*this.e)/t,(this.b*this.e-this.a*this.f)/t)}},{key:"multiply",value:function(t){return new e(t.a*this.a+t.b*this.c,t.a*this.b+t.b*this.d,t.c*this.a+t.d*this.c,t.c*this.b+t.d*this.d,t.e*this.a+t.f*this.c+this.e,t.e*this.b+t.f*this.d+this.f)}},{key:"transform",value:function(e,t){return new _e(this.a*e+this.c*t+this.e,this.b*e+this.d*t+this.f)}},{key:"transformVec",value:function(e){var t=this.transform(e.x,e.y);return new Me(t.x,t.y)}},{key:"transformPoint",value:function(e){return this.transform(e.x,e.y)}},{key:"scaleX",value:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},{key:"scaleY",value:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},{key:"translateX",value:function(){return this.e}},{key:"translateY",value:function(){return this.f}},{key:"translate",value:function(t,n){var r=new e(1,0,0,1,t,n);return this.multiply(r)}},{key:"rotate",value:function(t){var n=Math.cos(t),r=Math.sin(t),i=new e(n,r,-r,n,0,0);return this.multiply(i)}},{key:"rotateDegrees",value:function(e){var t=Ne(e);return this.rotate(t)}},{key:"clone",value:function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)}}],[{key:"identity",value:function(){return new e(1,0,0,1,0,0)}}]),e}(),Ue=function(){function e(){a(this,e)}return s(e,[{key:"float",value:function(){return Math.random()}},{key:"intN",value:function(e){var t=this.float()*e;return Math.round(t)}},{key:"choice",value:function(e){if(e)return e[this.intN(e.length)]}},{key:"rndStr",value:function(){return Math.random().toString(36).substr(2,5)}},{key:"randomString",value:function(e){if(e<1)return"";for(var t=[],n=e;n>0;){var r=this.rndStr();n-=r.length,t.push(r)}return t.join("").substr(0,e)}}]),e}(),Fe=l("Wgwc"),We=function e(){a(this,e),this.dayjs=Fe},qe=l("FFbo"),je=((De=function(){function e(){a(this,e)}return s(e,[{key:"csvStringify",value:function(t,n,r,i){return t?(r||(r=e.DELIMITER),i||(i=e.NEWLINE),n||(n=function(e){return""+e}),t.map((function(e){return e.map((function(e){return n(e)})).join(r)})).join(i)):""}},{key:"csvParse",value:function(t,n){return t?(n||(n=e.DELIMITER),t.split(/[\n|\r\n]/g).map((function(e){return e.trim()})).filter((function(e){return!!e})).map((function(e){return e.split(n).map((function(e){return e.trim()}))}))):[]}},{key:"xmlParse",value:function(t,n,r){return r||(r=e.XML_MIME_TYPE),new qe.DOMParser(n).parseFromString(t,r)}},{key:"numberToLocal",value:function(t){return e.NF.format(t)}}]),e}()).NEWLINE="\n",De.DELIMITER=";",De.XML_MIME_TYPE="application/xml",De.NF=new Intl.NumberFormat(void 0,{maximumFractionDigits:20}),De),Le=function(){function e(t){a(this,e),this.execution=t,this.io=new je}return s(e,[{key:"progress",value:function(e){e=xe(0,e,1),this.execution.progress(e)}},{key:"context",get:function(){return this.execution.context()}}]),e}(),Ve=function(e){t(i,e);var r=n(i);function i(e,t,n){return a(this,i),r.call(this,e,t,n)}return s(i,[{key:"internalExecute",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createFunction();case 2:return t=e.sent,e.prev=3,e.next=6,t();case 6:this.result=e.sent,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),e.t0.component=this.nodeData.name,e.t0;case 12:case"end":return e.stop()}}),e,this,[[3,9]])})))}},{key:"createSquishy",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Le(this.execution));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"createPlugins",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new We);case 1:case"end":return e.stop()}}),e)})))}},{key:"createFunction",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i,u,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.variables();case 2:return t=e.sent,e.next=5,this.createStaticVariables();case 5:return n=e.sent,t.push.apply(t,d(n)),r=t.map((function(e){return e.name})),i=this.getNodeData().script,u=c(Function,d(r).concat([i])),e.abrupt("return",(function(){return R(a,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.value})),e.next=3,u.call.apply(u,[{}].concat(d(n)));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))}));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"createStaticVariables",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createSquishy();case 2:return t=e.sent,e.next=5,this.createPlugins();case 5:return n=e.sent,e.abrupt("return",[{name:"Squishy",value:t},{name:"Mathf",value:h},{name:"Plugins",value:n}]);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"variables",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(ce.mapProperties(this.getNodeData().variables,(function(e,n){return R(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createVariable(n,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"createVariable",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getExecutor(e);case 2:if(r=n.sent,!ce.isNullOrUndefined(r)){n.next=5;break}throw new Error("unable to find node executor [ ".concat(r.id()," ] for id [ ").concat(e," ] and variable [ ").concat(t," ]"));case 5:if(r.isExecuted()){n.next=7;break}throw new Error("node executor [ ".concat(r.id()," ] for variable [ ").concat(t,", ").concat(e," ] is not yet executed"));case 7:return i=r.getResult(),n.abrupt("return",{name:t,value:i});case 9:case"end":return n.stop()}}),n,this)})))}}]),i}(de),He=function(e){return e.PlainText="plaintext",e.Json="json",e}({}),Ye=function(e){t(i,e);var r=n(i);function i(e,t,n){return a(this,i),r.call(this,e,t,n)}return s(i,[{key:"internalExecute",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.result=void 0,(t=this.getInputType())!==He.PlainText){e.next=7;break}return e.next=5,this.executeAsPlainText();case 5:e.next=11;break;case 7:if(e.t0=t===He.Json,!e.t0){e.next=11;break}return e.next=11,this.executeAsJson();case 11:case"end":return e.stop()}}),e,this)})))}},{key:"executeAsPlainText",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce.isNullOrUndefined(this.executionData)||(this.result=""+this.executionData);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"executeAsJson",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce.isNullOrUndefined(this.executionData)||(this.result=JSON.parse(""+this.executionData));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getInputType",value:function(){var e=this.getNodeData();return e&&e.inputType?e.inputType:He.PlainText}}]),i}(de),Be=function(){function e(t){a(this,e),this.execution=t,this.init()}return s(e,[{key:"init",value:function(){this.factoryFunction=new Map,this.factoryFunction.set(he.Chart,this.createChart),this.factoryFunction.set(he.Script,this.createScript),this.factoryFunction.set(he.FileInput,this.createFileInput),this.factoryFunction.set(he.TextInput,this.createTextInput),this.factoryFunction.set(he.FileOutput,this.createFileOutput)}},{key:"create",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.data.type,i=this.factoryFunction.get(r),!ce.isNullOrUndefined(i)){n.next=3;break}throw new Error("unable to find node executor factory for type [ ".concat(r," ]"));case 3:return n.next=5,i.call(this,e,t);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"createFileInput",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new me(this.execution,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"createScript",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Ve(this.execution,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"createFileOutput",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new ge(this.execution,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"createTextInput",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Ye(this.execution,e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"createChart",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new pe(this.execution,e,t));case 1:case"end":return n.stop()}}),n,this)})))}}]),e}(),Xe=function(){function e(t){a(this,e),this._status=t,this._context={},this._executed=0,this._progress=0,this.nodeExecutors=new Map}return s(e,[{key:"getExecutor",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.nodeExecutors.has(e)){t.next=2;break}return t.abrupt("return",this.nodeExecutors.get(e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"context",value:function(){return this._context}},{key:"progress",value:function(e,t){var n=1/this.nodeExecutors.size;this._progress=n*this._executed+n*e,(Date.now()-this._lastUpdate>500||t)&&(this._lastUpdate=Date.now(),this.status(le.RUNNING))}},{key:"load",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new Be(this),n.next=3,Promise.all(ce.getNodesData(e).map((function(e){return R(i,void 0,void 0,regeneratorRuntime.mark((function n(){var i,u,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!ce.isNullOrUndefined(e)&&!ce.isNullOrUndefined(e.data)){n.next=2;break}return n.abrupt("return");case 2:return i=e.data.id,u=t[i],n.next=6,r.create(e,u);case 6:a=n.sent,this.nodeExecutors.set(i,a);case 8:case"end":return n.stop()}}),n,this)})))})));case 3:case"end":return n.stop()}}),n,this)})))}},{key:"execute",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),this._lastUpdate=t,this.progress(0,!0),e.next=5,this.run([]);case 5:return e.next=7,this.getOutputs();case 7:return n=e.sent,e.abrupt("return",(this.status(le.RESPONSE),{outputs:n,time:Date.now()-t}));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"run",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=5;break}return t.next=3,this.executorRunnable(e);case 3:t.next=7;break;case 5:return t.next=7,this.inspectRunnableNodes(e);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"executorRunnable",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.shift(),r=this.nodeExecutors.get(n),t.next=3,r.execute();case 3:return this._executed++,this.progress(0,!0),t.abrupt("return",this.tick(e));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"inspectRunnableNodes",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],this.nodeExecutors.forEach((function(e){e.isExecuted()||n.push(e)})),t.next=4,Promise.all(n.map((function(t){return R(r,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.isExecuteable();case 2:if(!n.sent){n.next=5;break}r=t.id(),e.push(r);case 5:case"end":return n.stop()}}),n)})))})));case 4:if(!(e.length>0)){t.next=6;break}return t.abrupt("return",this.tick(e));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"tick",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){setTimeout((function(){n.run(e).then(t,r)}))})));case 1:case"end":return t.stop()}}),t)})))}},{key:"getOutputs",value:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.status(le.COLLECTING),t={},e.abrupt("return",(this.nodeExecutors.forEach((function(e){if(e.hasOutput()){var n=e.id();t[n]=e.getResult()}})),t));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"status",value:function(e){var t=this.nodeExecutors.size,n=Math.round(100*this._progress);this._status.next({total:t,state:e,progress:n,executed:this._executed})}}]),e}();k(function(){function e(){a(this,e),this._status=new K}return s(e,[{key:"execute",value:function(e,t){return R(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,this._status.next({total:0,executed:0,progress:0,state:le.INITIALIZING}),this.execution=new Xe(this._status),n.next=5,this.execution.load(e,t);case 5:return n.next=7,this.execution.execute();case 7:return n.abrupt("return",n.sent);case 8:return n.prev=8,this.execution=void 0,n.finish(8);case 11:case"end":return n.stop()}}),n,this,[[0,,8,11]])})))}},{key:"subscribe",value:function(e){return R(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._status.subscribe((function(t){return R(n,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=e,!n.t0){n.next=4;break}return n.next=4,e(t);case 4:case"end":return n.stop()}}),n)})))}));case 1:case"end":return t.stop()}}),t,this)})))}}]),e}())},FFbo:function(e,t,n){function r(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function u(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function o(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function s(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,u=n.domBuilder||new i,o=n.errorHandler,s=n.locator,h=n.xmlns||{},f=/\/x?html?$/.test(t),d=f?c.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return s&&u.setDocumentLocator(s),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},u=e instanceof Function;function o(t){var i=e[t];!i&&u&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+a(n))}||function(){}}return n=n||{},o("warning"),o("error"),o("fatalError"),r}(o,u,s),r.domBuilder=n.domBuilder||u,f&&(h[""]="http://www.w3.org/1999/xhtml"),h.xml=h.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,h,d):r.errorHandler.error("invalid doc source"),u.doc},i.prototype={startDocument:function(){this.doc=(new h).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,a=i.createElementNS(e,n||t),o=r.length;s(this,a),this.currentElement=a,this.locator&&u(this.locator,a);for(var c=0;c<o;c++){e=r.getURI(c);var l=r.getValue(c),h=(n=r.getQName(c),i.createAttributeNS(e,n));this.locator&&u(r.getLocator(c),h),h.value=h.nodeValue=l,a.setAttributeNode(h)}},endElement:function(e,t,n){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&u(this.locator,n),s(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=o.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&u(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=o.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&u(this.locator,r),s(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&u(this.locator,i),s(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var c=n("1KK4"),l=n("j3u8").XMLReader,h=t.DOMImplementation=n("wd0O").DOMImplementation;t.XMLSerializer=n("wd0O").XMLSerializer,t.DOMParser=r},Wgwc:function(e,t,n){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",r="hour",i="day",u="week",a="month",o="quarter",s="year",c="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},d={s:f,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+f(r,2,"0")+":"+f(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,a),u=n-i<0,o=t.clone().add(r+(u?-1:1),a);return+(-(r+(n-i)/(u?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(l){return{M:a,y:s,w:u,d:i,D:c,h:r,m:n,s:t,ms:e,Q:o}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v="en",y={};y[v]=p;var m=function(e){return e instanceof x},g=function(e,t,n){var r;if(!e)return v;if("string"==typeof e)y[e]&&(r=e),t&&(y[e]=t,r=e);else{var i=e.name;y[i]=e,r=i}return!n&&r&&(v=r),r||!n&&v},b=function(e,t){if(m(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new x(n)},w=d;w.l=g,w.i=m,w.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,$offset:t.$offset})};var x=function(){function f(e){this.$L=this.$L||g(e.locale,null,!0),this.parse(e)}var d=f.prototype;return d.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(l);if(r){var i=r[2]-1||0,u=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,u)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,u)}}return new Date(t)}(e),this.init()},d.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},d.$utils=function(){return w},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(e,t){var n=b(e);return this.startOf(t)<=n&&n<=this.endOf(t)},d.isAfter=function(e,t){return b(e)<this.startOf(t)},d.isBefore=function(e,t){return this.endOf(t)<b(e)},d.$g=function(e,t,n){return w.u(e)?this[t]:this.set(n,e)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(e,o){var l=this,h=!!w.u(o)||o,f=w.p(e),d=function(e,t){var n=w.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return h?n:n.endOf(i)},p=function(e,t){return w.w(l.toDate()[e].apply(l.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},v=this.$W,y=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(f){case s:return h?d(1,0):d(31,11);case a:return h?d(1,y):d(0,y+1);case u:var b=this.$locale().weekStart||0,x=(v<b?v+7:v)-b;return d(h?m-x:m+(6-x),y);case i:case c:return p(g+"Hours",0);case r:return p(g+"Minutes",1);case n:return p(g+"Seconds",2);case t:return p(g+"Milliseconds",3);default:return this.clone()}},d.endOf=function(e){return this.startOf(e,!1)},d.$set=function(u,o){var l,h=w.p(u),f="set"+(this.$u?"UTC":""),d=(l={},l[i]=f+"Date",l[c]=f+"Date",l[a]=f+"Month",l[s]=f+"FullYear",l[r]=f+"Hours",l[n]=f+"Minutes",l[t]=f+"Seconds",l[e]=f+"Milliseconds",l)[h],p=h===i?this.$D+(o-this.$W):o;if(h===a||h===s){var v=this.clone().set(c,1);v.$d[d](p),v.init(),this.$d=v.set(c,Math.min(this.$D,v.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},d.set=function(e,t){return this.clone().$set(e,t)},d.get=function(e){return this[w.p(e)]()},d.add=function(e,o){var c,l=this;e=Number(e);var h=w.p(o),f=function(t){var n=b(l);return w.w(n.date(n.date()+Math.round(t*e)),l)};if(h===a)return this.set(a,this.$M+e);if(h===s)return this.set(s,this.$y+e);if(h===i)return f(1);if(h===u)return f(7);var d=(c={},c[n]=6e4,c[r]=36e5,c[t]=1e3,c)[h]||1,p=this.$d.getTime()+e*d;return w.w(p,this)},d.subtract=function(e,t){return this.add(-1*e,t)},d.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=w.z(this),i=this.$locale(),u=this.$H,a=this.$m,o=this.$M,s=i.weekdays,c=i.months,l=function(e,r,i,u){return e&&(e[r]||e(t,n))||i[r].substr(0,u)},f=function(e){return w.s(u%12||12,e,"0")},d=i.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:w.s(o+1,2,"0"),MMM:l(i.monthsShort,o,c,3),MMMM:l(c,o),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:l(i.weekdaysMin,this.$W,s,2),ddd:l(i.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(u),HH:w.s(u,2,"0"),h:f(1),hh:f(2),a:d(u,a,!0),A:d(u,a,!1),m:String(a),mm:w.s(a,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:r};return n.replace(h,(function(e,t){return t||p[e]||r.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(e,c,l){var h,f=w.p(c),d=b(e),p=6e4*(d.utcOffset()-this.utcOffset()),v=this-d,y=w.m(this,d);return y=(h={},h[s]=y/12,h[a]=y,h[o]=y/3,h[u]=(v-p)/6048e5,h[i]=(v-p)/864e5,h[r]=v/36e5,h[n]=v/6e4,h[t]=v/1e3,h)[f]||v,l?y:w.a(y)},d.daysInMonth=function(){return this.endOf(a).$D},d.$locale=function(){return y[this.$L]},d.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=g(e,t,!0);return r&&(n.$L=r),n},d.clone=function(){return w.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},f}(),k=x.prototype;return b.prototype=k,[["$ms",e],["$s",t],["$m",n],["$H",r],["$W",i],["$M",a],["$y",s],["$D",c]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),b.extend=function(e,t){return e(t,x,b),b},b.locale=g,b.isDayjs=m,b.unix=function(e){return b(1e3*e)},b.en=y[v],b.Ls=y,b}()},j3u8:function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function u(){}function a(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function o(e,t,n,r,i,u){for(var a,o=++t,s=0;;){var c=e.charAt(o);switch(c){case"=":if(1===s)a=e.slice(t,o),s=3;else{if(2!==s)throw new Error("attribute equal must after attrName");s=3}break;case"'":case'"':if(3===s||1===s){if(1===s&&(u.warning('attribute value must after "="'),a=e.slice(t,o)),!((o=e.indexOf(c,t=o+1))>0))throw new Error("attribute value no end '"+c+"' match");l=e.slice(t,o).replace(/&#?\w+;/g,i),n.add(a,l,t-1),s=5}else{if(4!=s)throw new Error('attribute value must after "="');l=e.slice(t,o).replace(/&#?\w+;/g,i),n.add(a,l,t),u.warning('attribute "'+a+'" missed start quot('+c+")!!"),t=o+1,s=5}break;case"/":switch(s){case 0:n.setTagName(e.slice(t,o));case 5:case 6:case 7:s=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return u.error("unexpected end of input"),0==s&&n.setTagName(e.slice(t,o)),o;case">":switch(s){case 0:n.setTagName(e.slice(t,o));case 5:case 6:case 7:break;case 4:case 1:"/"===(l=e.slice(t,o)).slice(-1)&&(n.closed=!0,l=l.slice(0,-1));case 2:2===s&&(l=a),4==s?(u.warning('attribute "'+l+'" missed quot(")!!'),n.add(a,l.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&l.match(/^(?:disabled|checked|selected)$/i)||u.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),n.add(l,l,t));break;case 3:throw new Error("attribute value missed!!")}return o;case"\x80":c=" ";default:if(c<=" ")switch(s){case 0:n.setTagName(e.slice(t,o)),s=6;break;case 1:a=e.slice(t,o),s=2;break;case 4:var l=e.slice(t,o).replace(/&#?\w+;/g,i);u.warning('attribute "'+l+'" missed quot(")!!'),n.add(a,l,t);case 5:s=6}else switch(s){case 2:"http://www.w3.org/1999/xhtml"===r[""]&&a.match(/^(?:disabled|checked|selected)$/i)||u.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=o,s=1;break;case 5:u.warning('attribute space is required"'+a+'"!!');case 6:s=1,t=o;break;case 3:s=4,t=o;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function s(e,t,n){for(var r=e.tagName,i=null,u=e.length;u--;){var a=e[u],o=a.qName,s=a.value;if((d=o.indexOf(":"))>0)var c=a.prefix=o.slice(0,d),l=o.slice(d+1),f="xmlns"===c&&l;else l=o,c=null,f="xmlns"===o&&"";a.localName=l,!1!==f&&(null==i&&(i={},h(n,n={})),n[f]=i[f]=s,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(f,s))}for(u=e.length;u--;)(c=(a=e[u]).prefix)&&("xml"===c&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(a.uri=n[c||""]));var d;(d=r.indexOf(":"))>0?(c=e.prefix=r.slice(0,d),l=e.localName=r.slice(d+1)):(c=null,l=e.localName=r);var p=e.uri=n[c||""];if(t.startElement(p,l,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(p,l,r),i)for(c in i)t.endPrefixMapping(c)}function c(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var u=e.indexOf("</"+n+">",t),a=e.substring(t+1,u);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),u):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),u)}return t+1}function l(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function h(e,t){for(var n in e)t[n]=e[n]}function f(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var u=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),a=u.length;if(a>1&&/!doctype/i.test(u[0][0])){var o=u[1][0],s=a>3&&/^public$/i.test(u[2][0])&&u[3][0],c=a>4&&u[4][0],l=u[a-1];return n.startDTD(o,s&&s.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function d(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function p(e){}u.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),h(t,t={}),function(e,t,n,r,i){function u(e){var t,r=e.slice(1,-1);return r in n?n[r]:"#"===r.charAt(0)?(t=parseInt(r.substr(1).replace("x","0x")))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(i.error("entity not found:"+e),e)}function h(t){if(t>k){var n=e.substring(k,t).replace(/&#?\w+;/g,u);b&&v(k),r.characters(n,0,t-k),k=t}}function v(t,n){for(;t>=m&&(n=g.exec(e));)m=(y=n.index)+n[0].length,b.lineNumber++;b.columnNumber=t-y+1}for(var y=0,m=0,g=/.*(?:\r\n?|\n)|.*$/g,b=r.locator,w=[{currentNSMap:t}],x={},k=0;;){try{var N=e.indexOf("<",k);if(N<0){if(!e.substr(k).match(/^\s*$/)){var E=r.doc,S=E.createTextNode(e.substr(k));E.appendChild(S),r.currentElement=S}return}switch(N>k&&h(N),e.charAt(N+1)){case"/":var D=e.indexOf(">",N+3),M=e.substring(N+2,D),_=w.pop();D<0?(M=e.substring(N+2).replace(/[\s<].*/,""),i.error("end tag name: "+M+" is not complete:"+_.tagName),D=N+1+M.length):M.match(/\s</)&&(M=M.replace(/[\s<].*/,""),i.error("end tag name: "+M+" maybe not complete"),D=N+1+M.length);var T=_.localNSMap,R=_.tagName==M;if(R||_.tagName&&_.tagName.toLowerCase()==M.toLowerCase()){if(r.endElement(_.uri,_.localName,M),T)for(var O in T)r.endPrefixMapping(O);R||i.fatalError("end tag name: "+M+" is not match the current start tagName:"+_.tagName)}else w.push(_);D++;break;case"?":b&&v(N),D=d(e,N,r);break;case"!":b&&v(N),D=f(e,N,r,i);break;default:b&&v(N);var A=new p,z=w[w.length-1].currentNSMap,I=(D=o(e,N,A,z,u,i),A.length);if(!A.closed&&l(e,D,A.tagName,x)&&(A.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),b&&I){for(var C=a(b,{}),P=0;P<I;P++){var $=A[P];v($.offset),$.locator=a(b,{})}r.locator=C,s(A,r,z)&&w.push(A),r.locator=b}else s(A,r,z)&&w.push(A);"http://www.w3.org/1999/xhtml"!==A.uri||A.closed?D++:D=c(e,D,A.tagName,u,r)}}catch(U){i.error("element parse error: "+U),D=-1}D>k?k=D:h(Math.max(N,k)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},p.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=u},wd0O:function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(!(r instanceof t)){var i=function(){};i.prototype=t.prototype,n(r,i=new i),e.prototype=r=i}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var i={},u=i.ELEMENT_NODE=1,a=i.ATTRIBUTE_NODE=2,o=i.TEXT_NODE=3,s=i.CDATA_SECTION_NODE=4,c=i.ENTITY_REFERENCE_NODE=5,l=i.ENTITY_NODE=6,h=i.PROCESSING_INSTRUCTION_NODE=7,f=i.COMMENT_NODE=8,d=i.DOCUMENT_NODE=9,p=i.DOCUMENT_TYPE_NODE=10,v=i.DOCUMENT_FRAGMENT_NODE=11,y=i.NOTATION_NODE=12,m={},g={},b=(m.INDEX_SIZE_ERR=(g[1]="Index size error",1),m.DOMSTRING_SIZE_ERR=(g[2]="DOMString size error",2),m.HIERARCHY_REQUEST_ERR=(g[3]="Hierarchy request error",3)),w=(m.WRONG_DOCUMENT_ERR=(g[4]="Wrong document",4),m.INVALID_CHARACTER_ERR=(g[5]="Invalid character",5),m.NO_DATA_ALLOWED_ERR=(g[6]="No data allowed",6),m.NO_MODIFICATION_ALLOWED_ERR=(g[7]="No modification allowed",7),m.NOT_FOUND_ERR=(g[8]="Not found",8)),x=(m.NOT_SUPPORTED_ERR=(g[9]="Not supported",9),m.INUSE_ATTRIBUTE_ERR=(g[10]="Attribute in use",10));function k(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,g[e]),this.message=g[e],Error.captureStackTrace&&Error.captureStackTrace(this,k);return n.code=e,t&&(this.message=this.message+": "+t),n}function N(){}function E(e,t){this._node=e,this._refresh=t,S(this)}function S(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);te(e,"length",r.length),n(r,e),e._inc=t}}function D(){}function M(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _(e,t,n,r){if(r?t[M(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&C(i,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function T(e,t,n){var r=M(t,n);if(!(r>=0))throw k(w,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var u=e.ownerDocument;u&&(C(u,e,n),n.ownerElement=null)}}function R(e){if(this._features={},e)for(var t in e)this._features=e[t]}function O(){}function A(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function z(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(z(e,t))return!0}while(e=e.nextSibling)}function I(){}function C(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function P(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,u=0;i;)r[u++]=i,i=i.nextSibling;r.length=u}}}function $(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,P(e.ownerDocument,e),t}function U(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===v){var i=t.firstChild;if(null==i)return t;var u=t.lastChild}else i=u=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,u.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=u:n.previousSibling=u;do{i.parentNode=e}while(i!==u&&(i=i.nextSibling));return P(e.ownerDocument||e,e),t.nodeType==v&&(t.firstChild=t.lastChild=null),t}function F(){this._nsMap={}}function W(){}function q(){}function j(){}function L(){}function V(){}function H(){}function Y(){}function B(){}function X(){}function Q(){}function G(){}function Z(){}function J(e,t){var n=[],r=9==this.nodeType&&this.documentElement||this,i=r.prefix,u=r.namespaceURI;if(u&&null==i&&null==(i=r.lookupPrefix(u)))var a=[{namespace:u,prefix:null}];return ee(this,n,e,t,a),n.join("")}function K(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var u=n.length;u--;){var a=n[u];if(a.prefix==r)return a.namespace!=i}return!0}function ee(e,t,n,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case u:i||(i=[]);var l=e.attributes,y=l.length,m=e.firstChild,g=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",g);for(var b=0;b<y;b++)"xmlns"==(w=l.item(b)).prefix?i.push({prefix:w.localName,namespace:w.value}):"xmlns"==w.nodeName&&i.push({prefix:"",namespace:w.value});for(b=0;b<y;b++){var w,x,k;K(w=l.item(b),0,i)&&(t.push((x=w.prefix||"")?" xmlns:"+x:" xmlns",'="',k=w.namespaceURI,'"'),i.push({prefix:x,namespace:k})),ee(w,t,n,r,i)}if(K(e,0,i)&&(t.push((x=e.prefix||"")?" xmlns:"+x:" xmlns",'="',k=e.namespaceURI,'"'),i.push({prefix:x,namespace:k})),m||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(g)){if(t.push(">"),n&&/^script$/i.test(g))for(;m;)m.data?t.push(m.data):ee(m,t,n,r,i),m=m.nextSibling;else for(;m;)ee(m,t,n,r,i),m=m.nextSibling;t.push("</",g,">")}else t.push("/>");return;case d:case v:for(m=e.firstChild;m;)ee(m,t,n,r,i),m=m.nextSibling;return;case a:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,A),'"');case o:return t.push(e.data.replace(/[<&]/g,A));case s:return t.push("<![CDATA[",e.data,"]]>");case f:return t.push("\x3c!--",e.data,"--\x3e");case p:var N=e.publicId,E=e.systemId;if(t.push("<!DOCTYPE ",e.name),N)t.push(' PUBLIC "',N),E&&"."!=E&&t.push('" "',E),t.push('">');else if(E&&"."!=E)t.push(' SYSTEM "',E,'">');else{var S=e.internalSubset;S&&t.push(" [",S,"]"),t.push(">")}return;case h:return t.push("<?",e.target," ",e.data,"?>");case c:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function te(e,t,n){e[t]=n}m.INVALID_STATE_ERR=(g[11]="Invalid state",11),m.SYNTAX_ERR=(g[12]="Syntax error",12),m.INVALID_MODIFICATION_ERR=(g[13]="Invalid modification",13),m.NAMESPACE_ERR=(g[14]="Invalid namespace",14),m.INVALID_ACCESS_ERR=(g[15]="Invalid access",15),k.prototype=Error.prototype,n(m,k),N.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)ee(this[r],n,e,t);return n.join("")}},E.prototype.item=function(e){return S(this),this[e]},r(E,N),D.prototype={length:0,item:N.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new k(x);var n=this.getNamedItem(e.nodeName);return _(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new k(x);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return T(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return T(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},R.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new I;if(r.implementation=this,r.childNodes=new N,r.doctype=n,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new H;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},O.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return U(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return $(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var i=new n.constructor;for(var o in n){var s=n[o];"object"!=typeof s&&s!=i[o]&&(i[o]=s)}switch(n.childNodes&&(i.childNodes=new N),i.ownerDocument=t,i.nodeType){case u:var c=n.attributes,l=i.attributes=new D,h=c.length;l._ownerElement=i;for(var f=0;f<h;f++)i.setAttributeNode(e(t,c.item(f),!0));break;case a:r=!0}if(r)for(var d=n.firstChild;d;)i.appendChild(e(t,d,r)),d=d.nextSibling;return i}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==o&&e.nodeType==o?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(i,O),n(i,O.prototype),I.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==v){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==u&&(this.documentElement=e),U(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),$(this,e)},importNode:function(e,t){return function e(t,n,r){var i;switch(n.nodeType){case u:(i=n.cloneNode(!1)).ownerDocument=t;case v:break;case a:r=!0}if(i||(i=n.cloneNode(!1)),i.ownerDocument=t,i.parentNode=null,r)for(var o=n.firstChild;o;)i.appendChild(e(t,o,r)),o=o.nextSibling;return i}(this,e,t)},getElementById:function(e){var t=null;return z(this.documentElement,(function(n){if(n.nodeType==u&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=new RegExp("(^|\\s)".concat(e,"(\\s|$)"));return new E(this,(function(e){var n=[];return z(e.documentElement,(function(r){r!==e&&r.nodeType==u&&t.test(r.getAttribute("class"))&&n.push(r)})),n}))},createElement:function(e){var t=new F;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new N,(t.attributes=new D)._ownerElement=t,t},createDocumentFragment:function(){var e=new Q;return e.ownerDocument=this,e.childNodes=new N,e},createTextNode:function(e){var t=new j;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new L;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new G;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new W;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new X;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new F,r=t.split(":"),i=n.attributes=new D;return n.childNodes=new N,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new W,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(I,O),I.prototype.getElementsByTagName=(F.prototype={nodeType:u,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===v?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,P(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new E(this,(function(t){var n=[];return z(t,(function(r){r===t||r.nodeType!=u||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new E(this,(function(n){var r=[];return z(n,(function(i){i===n||i.nodeType!==u||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}}).getElementsByTagName,I.prototype.getElementsByTagNameNS=F.prototype.getElementsByTagNameNS,r(F,O),W.prototype.nodeType=a,r(W,O),q.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){this.nodeValue=this.data=e=this.data+e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(g[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var r=this.data.substring(0,e),i=this.data.substring(e+t);this.nodeValue=this.data=n=r+n+i,this.length=n.length}},r(q,O),j.prototype={nodeName:"#text",nodeType:o,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(j,q),L.prototype={nodeName:"#comment",nodeType:f},r(L,q),V.prototype={nodeName:"#cdata-section",nodeType:s},r(V,q),H.prototype.nodeType=p,r(H,O),Y.prototype.nodeType=y,r(Y,O),B.prototype.nodeType=l,r(B,O),X.prototype.nodeType=c,r(X,O),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=v,r(Q,O),G.prototype.nodeType=h,r(G,O),Z.prototype.serializeToString=function(e,t,n){return J.call(e,t,n)},O.prototype.toString=J;try{Object.defineProperty&&(Object.defineProperty(E.prototype,"length",{get:function(){return S(this),this.$$length}}),Object.defineProperty(O.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case u:case v:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case u:case v:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),te=function(e,t,n){e["$$"+t]=n})}catch(ne){}t.Node=O,t.DOMImplementation=R,t.XMLSerializer=Z}})}();